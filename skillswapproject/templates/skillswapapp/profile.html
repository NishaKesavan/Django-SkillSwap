{% extends 'skillswapapp/base.html' %}
{% load static %}
{% block body_block %}

<div class="profile-container">
  <h1>{{ request.user.first_name }}'s Profile</h1>

    <form method="post" enctype="multipart/form-data" class="profile-form">
        {% csrf_token %}

        <label for="id_first_name">First Name:</label>
        {{ user_form.first_name }}

        <label for="id_email">Email:</label>
        {{ user_form.email }}

        <label for="id_profile_picture">Profile Picture:</label>
        <div>
            {{ profile_form.profile_picture }}
            {% if user_profile.profile_picture %}
            <div class="profile-picture-preview">
                <img src="{{ user_profile.profile_picture.url }}" alt="Profile Picture">
            </div>
            {% endif %}
        </div>

        <label for="id_bio">Bio:</label>
        {{ profile_form.bio }}

        <div></div>
        <button type="submit" class="update-btn">Update Profile</button>
    </form>

  <hr>
  <h2>Your Skills</h2>
  <a href="{% url 'skillswapapp:addskills' %}" class="profile-btn">Add Skills</a>
  <ul>
    {% for skill in user_skills %}
      <li>
        <strong>Skill: {{ skill.title }}</strong><br>
        Category: {{ skill.get_category_display }}<br>
        <em>Description: {{ skill.description }}</em><br>
        Availability: {{ skill.availability }}<br>
        Location: {{ skill.location }}<br><br>
        <form method="post" action="{% url 'skillswapapp:deleteskill' skill.id %}" style="display:inline;">
          {% csrf_token %}
          <button type="submit" onclick="return confirm('Are you sure you want to delete this skill?');">Delete</button>
        </form>
      </li>
    {% empty %}
      <li>You haven't added any skills yet.</li>
    {% endfor %}
  </ul>
</div>

{% endblock %}